<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Neon Catcher X</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: radial-gradient(circle at top, #0f2027, #000);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      user-select: none;
    }
    h1 {
      margin-top: 16px;
      letter-spacing: 3px;
    }
    .hud {
      display: flex;
      gap: 24px;
      margin-top: 8px;
      font-size: 16px;
    }
    canvas {
      background: linear-gradient(#0a0a0a, #000);
      margin-top: 16px;
      border-radius: 18px;
      box-shadow: 0 0 40px rgba(0, 255, 200, 0.35);
    }
    .hint {
      opacity: 0.7;
      font-size: 13px;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <h1>NEON CATCHER X</h1>
  <div class="hud">
    <div>Score: <span id="score">0</span></div>
    <div>Combo: <span id="combo">1x</span></div>
    <div>Leben: <span id="lives">3</span></div>
    <div>Zeit: <span id="time">45</span>s</div>
  </div>

  <canvas id="game" width="460" height="560"></canvas>
  <div class="hint">Bewege die Maus · Fang gute Orbs · Weiche roten aus</div>

  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');

    const scoreEl = document.getElementById('score');
    const comboEl = document.getElementById('combo');
    const livesEl = document.getElementById('lives');
    const timeEl = document.getElementById('time');

    let score = 0;
    let combo = 1;
    let lives = 3;
    let timeLeft = 45;
    let gameOver = false;

    const player = { x: canvas.width / 2, y: canvas.height - 50, r: 26 };
    const items = [];
    const particles = [];

    const types = [
      { color: '#00ff99', points: 1, r: 14 },
      { color: '#00aaff', points: 3, r: 10 },
      { color: '#ff3355', points: -1, r: 18, bad: true }
    ];

    canvas.addEventListener('mousemove', e => {
      const rect = canvas.getBoundingClientRect();
      player.x = e.clientX - rect.left;
    });

    function spawnItem() {
      const t = types[Math.floor(Math.random() * types.length)];
      items.push({
        x: Math.random() * canvas.width,
        y: -20,
        vy: 2 + Math.random() * 2,
        ...t
      });
    }

    function spawnParticles(x, y, color) {
      for (let i = 0; i < 12; i++) {
        particles.push({
          x, y,
          vx: (Math.random() - 0.5) * 4,
          vy: (Math.random() - 0.5) * 4,
          life: 30,
          color
        });
      }
    }

    function drawGlowCircle(x, y, r, color) {
      ctx.shadowColor = color;
      ctx.shadowBlur = 20;
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.arc(x, y, r, 0, Math.PI * 2);
      ctx.fill();
      ctx.shadowBlur = 0;
    }

    function update() {
      if (gameOver) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Player
      drawGlowCircle(player.x, player.y, player.r, '#ffffff');

      // Items
      for (let i = items.length - 1; i >= 0; i--) {
        const it = items[i];
        it.y += it.vy;
        drawGlowCircle(it.x, it.y, it.r, it.color);

        const dx = it.x - player.x;
        const dy = it.y - player.y;
        const dist = Math.hypot(dx, dy);

        if (dist < it.r + player.r) {
          if (it.bad) {
            lives--;
            combo = 1;
          } else {
            score += it.points * combo;
            combo++;
          }
          spawnParticles(it.x, it.y, it.color);
          items.splice(i, 1);
        } else if (it.y > canvas.height + 40) {
          if (!it.bad) combo = 1;
          items.splice(i, 1);
        }
      }

      // Particles
      for (let i = particles.length - 1; i >= 0; i--) {
        const p = particles[i];
        p.x += p.vx;
        p.y += p.vy;
        p.life--;
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x, p.y, 2, 2);
        if (p.life <= 0) particles.splice(i, 1);
      }

      scoreEl.textContent = score;
      comboEl.textContent = combo + 'x';
      livesEl.textContent = lives;

      if (lives <= 0) endGame();

      requestAnimationFrame(update);
    }

    function endGame() {
      gameOver = true;
      ctx.fillStyle = '#fff';
      ctx.font = 'bold 36px Arial';
      ctx.textAlign = 'center';
      ctx.fillText('GAME OVER', canvas.width / 2, canvas.height / 2 - 20);
      ctx.font = '20px Arial';
      ctx.fillText(`Score: ${score}`, canvas.width / 2, canvas.height / 2 + 20);
    }

    setInterval(() => !gameOver && spawnItem(), 500);

    setInterval(() => {
      if (gameOver) return;
      timeLeft--;
      timeEl.textContent = timeLeft;
      if (timeLeft <= 0) endGame();
    }, 1000);

    update();
  </script>
</body>
</html>
